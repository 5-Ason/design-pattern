```
某软件公司承接了某信息咨询公司的收费商务信息查询系统的开发任务，该系统的基本需求如下：
(1) 在进行商务信息查询之前用户需要通过身份验证，只有合法用户才能够使用该查询系统；
(2) 在进行商务信息查询时系统需要记录查询日志，以便根据查询次数收取查询费用。
该软件公司开发人员已完成了商务信息查询模块的开发任务，
现希望能够以一种松耦合的方式向原有系统增加身份验证和日志记录功能，
客户端代码可以无区别地对待原始的商务信息查询模块和增加新功能之后的商务信息查询模块，
而且可能在将来还要在该信息查询模块中增加一些新的功能。
试使用代理模式设计并实现该收费商务信息查询系统。
```

思路：

```
通过分析，可以采用一种间接访问的方式来实现该商务信息查询系统的设计，
在客户端对象和信息查询对象之间增加一个代理对象，
让代理对象来实现身份验证和日志记录等功能，
而无须直接对原有的商务信息查询对象进行修改，如下图所示：
```
![image](http://img.my.csdn.net/uploads/201211/26/1353943846_5465.jpg)

```
客户端对象通过代理对象间接访问具有商务信息查询功能的真实对象，
在代理对象中除了调用真实对象的商务信息查询功能外，
还增加了身份验证和日志记录等功能。
使用代理模式设计该商务信息查询系统，结构图如下图所示：
```
![image](http://img.my.csdn.net/uploads/201211/26/1353943854_9883.jpg)

```
业务类AccessValidator用于验证用户身份，
业务类Logger用于记录用户查询日志，
Searcher充当抽象主题角色，
RealSearcher充当真实主题角色，
ProxySearcher充当代理主题角色
```
